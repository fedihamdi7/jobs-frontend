<div class="container">

  <div class="logo">
    <p-image src="./../../assets/Logo_JOBS.png" alt="Image" width="250"></p-image>
  </div>


  <form [formGroup]="form" (submit)="onSubmit()">
    <div class="devider">
      <div class="formLeft">
        <div class="switcher"> <span>User</span>
          <p-inputSwitch formControlName="isCompany"></p-inputSwitch> <span>Company</span>
        </div>


        <div>
          @if (form.value.isCompany) {
            <label for="name"> Company Name* </label> <br>
          }@else{
            <label for="name"> Name* </label> <br>
          }
          
          <input type="text" id="name" pInputText formControlName="name" 
          [ngClass]="{'ng-invalid': form.get('name').errors?.['required'] && form.get('name').touched,
            'ng-dirty' : form.get('name').touched
            }"
          aria-describedby="name-error" /> <br>
          <small id="name-error" class="p-error"
            *ngIf="form.get('name').errors?.['required'] && form.get('name').touched">Name is required</small>
        </div>
        <div>
          <label for="email"> Email </label> <br>
          <input type="text" pInputText formControlName="email"
          [ngClass]="{'ng-invalid': form.get('email').errors?.['required'] && form.get('email').touched,
            'ng-dirty' : form.get('email').touched
            }"
             aria-describedby="email-error" /> <br>
          <small id="email-error" class="p-error"
            *ngIf="form.get('email').errors?.['required'] && form.get('email').touched">Email is required</small>
          <small id="email-error" class="p-error"
            *ngIf="form.get('email').errors?.['email'] && form.get('email').touched">Please enter a valid email</small>
        </div>


        <div>
          <label for="password"> Password </label> <br>
          <p-password formControlName="password" [toggleMask]="true" id="password"
          [ngClass]="{'ng-invalid': form.get('password').errors?.['required'] && form.get('password').touched,
            'ng-dirty' : form.get('password').touched
            }"
             aria-describedby="password-error">
          </p-password> <br>
          <small id="password-error" class="p-error"
            *ngIf="form.get('password').errors?.['required'] && form.get('password').touched">Password is
            required</small>
        </div>


        <div class="profilePic">
          <p-fileUpload mode="basic" chooseLabel="Choose Profile Picture" accept="image/*" [maxFileSize]='10000000'
            (uploadHandler)="onFilePicked($event,true)" #profilePicUpload [customUpload]="true">
          </p-fileUpload>
        </div>

        <div class="phone">
          <span>Phone</span>
          <p-inputMask class="custom" mask="99 999 999" formControlName="phone" placeholder="12 345 678"></p-inputMask>
        </div>

      </div>

      <div class="formRight">

        <div class="birthDate">
          <span>Birthday</span>
          <p-calendar dateFormat="dd/mm/yy" formControlName="birthDate" [showIcon]="true" placeholder="Choose a date">
          </p-calendar>
        </div>

        <div>
          <p-dropdown placeholder="Select a City" formControlName="governorate" [options]="cities" optionLabel="name">
          </p-dropdown>
        </div>

        @if (!form.value.isCompany) {
            <div class="resume">
                <p-fileUpload mode="basic" chooseLabel="Upload a resume" accept="image/* , application/pdf" [maxFileSize]='10000000'
                  (uploadHandler)="onFilePicked($event,false)" #resumeUpload [customUpload]="true">
                </p-fileUpload>
            </div>
        }






      </div>


    </div>

    <p-button type="submit" label="Submit" [disabled]="form.status == 'INVALID'"></p-button>

  </form>
  <p-toast></p-toast>



</div>
